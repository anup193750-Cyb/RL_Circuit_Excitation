<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>âš¡ RL Circuit Vâ€“I Characteristics | AC Excitation Simulator</title>
  <meta name="description" content="Interactive RL circuit simulator to visualize voltageâ€“current characteristics for AC excitation using V(t)=VmÂ·cos(Ï‰t).">
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      font-family: "Segoe UI", Roboto, sans-serif;
      background: #f8fafc;
      color: #222;
      margin: 0;
      padding: 20px;
    }
    header {
      text-align: center;
      margin-bottom: 20px;
    }
    h1 {
      color: #0047ab;
      margin-bottom: 6px;
    }
    p {
      font-size: 0.95rem;
      color: #333;
    }
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
      margin: 20px 0;
      background: #eef4ff;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .control {
      flex: 1 1 300px;
    }
    .label {
      display: block;
      font-weight: 600;
      margin-bottom: 5px;
    }
    input[type="range"] {
      width: 100%;
    }
    #plots {
      display: flex;
      flex-wrap: wrap;
      gap: 25px;
      justify-content: center;
    }
    #plots > div {
      flex: 1 1 500px;
      min-width: 300px;
    }
    #info {
      background: #f0f9ff;
      border-left: 6px solid #0284c7;
      padding: 15px 20px;
      border-radius: 10px;
      width: 90%;
      max-width: 800px;
      margin: 25px auto;
    }
    footer {
      text-align: center;
      margin-top: 30px;
      font-size: 0.85rem;
      color: #666;
    }
  </style>
</head>
<body>

<header>
  <h1>âš¡ RL Circuit Simulator â€” Vâ€“I Characteristics (AC Excitation)</h1>
  <p>Visualize voltage and current phase relation in an RL circuit driven by <b>V(t) = Vâ‚˜Â·cos(Ï‰t)</b>.</p>
</header>

<div class="controls">
  <div class="control">
    <span class="label">Voltage Amplitude (Vâ‚˜): <span id="Vm_val">10</span> V</span>
    <input type="range" id="Vm" min="1" max="100" value="10" step="1">
  </div>

  <div class="control">
    <span class="label">Frequency (Hz): <span id="f_val">50</span></span>
    <input type="range" id="f" min="10" max="1000" value="50" step="10">
  </div>

  <div class="control">
    <span class="label">Resistance (R): <span id="R_val">10</span> Î©</span>
    <input type="range" id="R" min="1" max="100" value="10" step="1">
  </div>

  <div class="control">
    <span class="label">Inductance (L): <span id="L_val">0.1</span> H</span>
    <input type="range" id="L" min="0.001" max="1" value="0.1" step="0.001">
  </div>
</div>

<div id="plots">
  <div id="plot_time"></div>
  <div id="plot_vi"></div>
</div>

<div id="info"></div>

<footer>
  <b>Experiment:</b> Vâ€“I Characteristics of RL Circuit |
  <b>Created by:</b> EE24BT003 | <b>Roll No:</b> EE24BT015
</footer>

<script>
const Vm_slider = document.getElementById("Vm");
const f_slider = document.getElementById("f");
const R_slider = document.getElementById("R");
const L_slider = document.getElementById("L");

[Vm_slider, f_slider, R_slider, L_slider].forEach(sl => sl.addEventListener("input", update));

function update() {
  const Vm = parseFloat(Vm_slider.value);
  const f = parseFloat(f_slider.value);
  const R = parseFloat(R_slider.value);
  const L = parseFloat(L_slider.value);

  document.getElementById("Vm_val").textContent = Vm;
  document.getElementById("f_val").textContent = f;
  document.getElementById("R_val").textContent = R;
  document.getElementById("L_val").textContent = L.toFixed(3);

  const Ï‰ = 2 * Math.PI * f;
  const Z = Math.sqrt(R**2 + (Ï‰*L)**2);
  const Ï† = Math.atan2(Ï‰*L, R);
  const I_m = Vm / Z;

  const t = Array.from({ length: 800 }, (_, i) => i * (1 / (100 * f)));
  const v = t.map(tt => Vm * Math.cos(Ï‰ * tt));
  const i = t.map(tt => I_m * Math.cos(Ï‰ * tt - Ï†));

  // Plot 1: Voltage & Current vs Time
  Plotly.newPlot("plot_time", [
    { x: t, y: v, name: "Voltage (V)", line: { color: "#2563eb" } },
    { x: t, y: i, name: "Current (A)", line: { color: "#dc2626" }, yaxis: "y2" }
  ], {
    title: "Voltage and Current vs Time",
    xaxis: { title: "Time (s)" },
    yaxis: { title: "Voltage (V)" },
    yaxis2: { title: "Current (A)", overlaying: "y", side: "right" },
    legend: { orientation: "h", x: 0.2, y: 1.1 }
  }, {responsive: true});

  // Plot 2: Vâ€“I Lissajous Curve
  Plotly.newPlot("plot_vi", [{
    x: v, y: i, mode: "lines",
    line: { color: "#16a34a" },
    name: "Vâ€“I Characteristic"
  }], {
    title: "Vâ€“I Characteristic (Lissajous Curve)",
    xaxis: { title: "Voltage (V)" },
    yaxis: { title: "Current (A)" },
    aspectratio: { x: 1, y: 1 }
  }, {responsive: true});

  // Info section
  const pf = Math.cos(Ï†).toFixed(3);
  const Ï„ = (R === 0 ? 0 : L / R).toFixed(4);
  document.getElementById("info").innerHTML = `
    <h3>ğŸ“˜ Circuit Parameters</h3>
    <b>Impedance (Z):</b> ${Z.toFixed(2)} Î©<br>
    <b>Phase Angle (Ï†):</b> ${(Ï† * 180 / Math.PI).toFixed(2)}Â°<br>
    <b>Current Amplitude (Iâ‚˜):</b> ${I_m.toFixed(3)} A<br>
    <b>Power Factor:</b> ${pf}<br>
    <b>Time Constant (Ï„ = L/R):</b> ${Ï„} s
    <hr>
    <b>Formulas:</b><br>
    V(t) = Vâ‚˜Â·cos(Ï‰t)<br>
    I(t) = (Vâ‚˜ / Z)Â·cos(Ï‰t âˆ’ Ï†)<br>
    Z = âˆš(RÂ² + (Ï‰L)Â²), Ï† = tanâ»Â¹(Ï‰L / R)
  `;
}

update();
</script>

</body>
</html>
